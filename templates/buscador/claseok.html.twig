{% extends 'base.html.twig' %}
 {% block stylesheets %}
        <link rel="stylesheet" href="{{ asset('styles/app.css') }}">
        <link rel="stylesheet" href="{{ asset('styles/bodygrid.css') }}">
{% endblock %}
{% block body %}
    <div class="grid-body">
        <div class="L1"></div>
        
        <div class="DC">
            <div class='grid-clase'>
                <span class="V1"> </span>
                <h1 class="N">{{clase.nombre}}</h1>
                
                 <div class="H"><b>Habilidades: </b> <p>{{clase.HabilidadesAElegir}}</p></div>
                <div class="C"><b>Competencias: </b> <p>{{clase.Competencias}}</p></div>
                
               
                <div class="E"> <b >Equipo: </b> <p>{{clase.Equipamiento}}</p></div>
                <div class="P"><b>Puntos de golpe: </b> <p>{{clase.PuntosDeGolpe}}</p></div>
                <div class="S"><b>Salvaciones: </b> <p>{{clase.Salvaciones}}</p></div>
                <div class="R"><b >Requisitos: </b> <p>{{clase.Requisitos}}</p></div>
                <div  class="I" ><img src="{{clase.img}}"/></div>
                <span class="V2"></span>
            </div>
        </div>
        <div class="TP" >
            <h1>Tabla de Progresión</h1>
            <table class="Progreso">
            <tr>
                <th>Nivel</th>
                <th>Competencia</th>
                <th>Mejoras</th>
            </tr>
                {% for linea in tabla %}
                    <tr>
                        <td>{{linea[0]}}</td>
                        <td>{{linea[1]}}</td>
                        <td>{{linea[2]}}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
        <div class="RC">
            <h1>Rasgos de Clase</h1>
            <div>
                {% for habilidad in rasgos %}
                    <div class="grid-rasgos">
                        <span class="N">{{habilidad.nombre}}</span>
                        <span class="V1"></span>
                        <span class="L">Nivel {{habilidad.OrigenNivel}}</span>
                        <span class="D">{% set parraf = ""%}
                                        {% set buffer = 0 %}
                                        {% for i in 0.. habilidad.Descripción|length %}
                                            {% if buffer > 0 %}
                                                {% set buffer = buffer - 1 %}
                                            {% elseif habilidad.Descripción|slice(i,5) == "{|S|}" %}
                                                {% set parraf = [parraf,"\n"]|join %}
                                                {% set buffer = 4 %}
                                            {% elseif habilidad.Descripción|slice(i,5) == "{|B|}" %}
                                                {{parraf|nl2br}}
                                                {% set parraf = ""%}
                                                <b>
                                                {% set buffer = 4 %}
                                            {% elseif habilidad.Descripción|slice(i,6) == "{|/B|}" %}
                                                {{parraf|nl2br}}
                                                {% set parraf = ""%}
                                                </b>
                                                {% set buffer = 5 %}
                                            {% else %}
                                                {% set parraf = [parraf,habilidad.Descripción|slice(i,1)]|join %}
                                            {% endif %}
                                        {% endfor %}
                                        {{parraf|nl2br}}
                        </span> 

                        

                         
                    </div><br>
                {% endfor %}
            </div>
        </div>
        <div class="L2"></div>
    </div>
{% endblock %}


{# Función para ejecutar comandos
{% set parraf = ""%}
{% set buffer = 0 %}
{% for i in 0.. habilidad.Descripción|length %}
                            {% if buffer > 0 %}
                                {% set buffer = buffer - 1 %}
                            {% elseif habilidad.Descripción|slice(i,5) == "{|S|}" %}
                                {% set parraf = [parraf,"\n"]|join %}
                                {% set buffer = 4 %}
                            {% elseif habilidad.Descripción|slice(i,5) == "{|B|}" %}
                                {{parraf|nl2br}}
                                {% set parraf = ""%}
                                <b>
                                {% set buffer = 4 %}
                            {% elseif habilidad.Descripción|slice(i,6) == "{|/B|}" %}
                                {{parraf|nl2br}}
                                {% set parraf = ""%}
                                </b>
                                {% set buffer = 5 %}
                            {% else %}
                                {% set parraf = [parraf,habilidad.Descripción|slice(i,1)]|join %}
                            {% endif %}
                        {% endfor %}
                        {{parraf|nl2br}} #}